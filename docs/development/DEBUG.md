# Debug æ¨¡å¼ä½¿ç”¨æŒ‡å—

**æ›´æ–°æ—¥æœŸ**: 2024å¹´12æœˆ

## ğŸ› Debug æ¨¡å¼é¸é …

### æ–¹æ³• 1: é–‹ç™¼æ¨¡å¼ï¼ˆæ¨è–¦ï¼‰â­

é€™æ˜¯æœ€å¸¸ç”¨çš„ debug æ–¹å¼ï¼Œæœƒè‡ªå‹•é–‹å•Ÿé–‹ç™¼è€…å·¥å…·ä¸¦æ”¯æŒç†±é‡è¼‰ï¼š

```bash
cd ClassNoteAI
npm run tauri:dev
```

**ç‰¹é»**ï¼š
- âœ… è‡ªå‹•é–‹å•Ÿé–‹ç™¼è€…å·¥å…·ï¼ˆDevToolsï¼‰
- âœ… æ”¯æŒç†±é‡è¼‰ï¼ˆHMRï¼‰
- âœ… å‰ç«¯ä»£ç¢¼ä¿®æ”¹å¾Œè‡ªå‹•åˆ·æ–°
- âœ… Rust ä»£ç¢¼ä¿®æ”¹å¾Œè‡ªå‹•é‡æ–°ç·¨è­¯
- âœ… è©³ç´°çš„éŒ¯èª¤ä¿¡æ¯å’Œæ—¥èªŒ

**å¿«æ·éµ**ï¼š
- æ‰“é–‹/é—œé–‰é–‹ç™¼è€…å·¥å…·ï¼š`Cmd + Option + I` (macOS) æˆ– `Ctrl + Shift + I` (Windows/Linux)

### æ–¹æ³• 2: æ§‹å»º Debug ç‰ˆæœ¬

æ§‹å»ºä¸€å€‹å¸¶èª¿è©¦ç¬¦è™Ÿçš„æ‡‰ç”¨ç‰ˆæœ¬ï¼š

```bash
cd ClassNoteAI
npm run tauri:build:debug
```

**è¼¸å‡ºä½ç½®**ï¼š
- macOS: `src-tauri/target/debug/bundle/macos/classnoteai.app`

**ç‰¹é»**ï¼š
- âœ… åŒ…å«èª¿è©¦ç¬¦è™Ÿï¼Œä¾¿æ–¼èª¿è©¦
- âœ… æœªå„ªåŒ–ï¼Œé‹è¡Œè¼ƒæ…¢ä½†æ˜“æ–¼èª¿è©¦
- âœ… å¯ä»¥é™„åŠ èª¿è©¦å™¨ï¼ˆå¦‚ lldb/gdbï¼‰

**é‹è¡Œæ–¹å¼**ï¼š
```bash
# æ–¹æ³• 1: ä½¿ç”¨ open å‘½ä»¤ï¼ˆå¯ä»¥åœ¨çµ‚ç«¯çœ‹åˆ°æ—¥èªŒï¼‰
open src-tauri/target/debug/bundle/macos/classnoteai.app

# æ–¹æ³• 2: ç›´æ¥é›™æ“Šé‹è¡Œ
```

### æ–¹æ³• 3: åœ¨å·²æ‰“åŒ…çš„æ‡‰ç”¨ä¸­é–‹å•Ÿé–‹ç™¼è€…å·¥å…·

å¦‚æœå·²ç¶“æ‰“åŒ…äº†æ‡‰ç”¨ï¼Œå¯ä»¥é€šéä»£ç¢¼è‡ªå‹•é–‹å•Ÿé–‹ç™¼è€…å·¥å…·ï¼š

**ä»£ç¢¼å·²é…ç½®**ï¼šåœ¨ `src-tauri/src/lib.rs` ä¸­å·²æ·»åŠ è‡ªå‹•é–‹å•Ÿé–‹ç™¼è€…å·¥å…·çš„ä»£ç¢¼ï¼š

```rust
#[cfg(debug_assertions)]
{
    if let Some(window) = app.get_webview_window("main") {
        window.open_devtools();
    }
}
```

**æ³¨æ„**ï¼šé€™åªåœ¨ debug æ§‹å»ºæ™‚ç”Ÿæ•ˆã€‚å¦‚æœæ˜¯ release æ§‹å»ºï¼Œéœ€è¦æ‰‹å‹•é–‹å•Ÿï¼š

**æ‰‹å‹•é–‹å•Ÿé–‹ç™¼è€…å·¥å…·**ï¼š
- macOS: `Cmd + Option + I`
- Windows/Linux: `Ctrl + Shift + I`

## ğŸ”§ èª¿è©¦æŠ€å·§

### 1. æŸ¥çœ‹ Rust æ—¥èªŒ

åœ¨çµ‚ç«¯é‹è¡Œæ‡‰ç”¨æ™‚ï¼ŒRust çš„ `println!` å’Œ `eprintln!` æœƒè¼¸å‡ºåˆ°çµ‚ç«¯ï¼š

```bash
# é–‹ç™¼æ¨¡å¼ï¼ˆè‡ªå‹•é¡¯ç¤ºï¼‰
npm run tauri:dev

# Debug ç‰ˆæœ¬ï¼ˆåœ¨çµ‚ç«¯é‹è¡Œï¼‰
open src-tauri/target/debug/bundle/macos/classnoteai.app
```

### 2. æŸ¥çœ‹å‰ç«¯æ—¥èªŒ

åœ¨é–‹ç™¼è€…å·¥å…·çš„æ§åˆ¶å°ï¼ˆConsoleï¼‰ä¸­æŸ¥çœ‹ï¼š
- `console.log()` è¼¸å‡º
- éŒ¯èª¤ä¿¡æ¯
- ç¶²çµ¡è«‹æ±‚

### 3. ä½¿ç”¨ Rust èª¿è©¦å™¨

å°æ–¼ Rust ä»£ç¢¼èª¿è©¦ï¼Œå¯ä»¥ä½¿ç”¨ `lldb`ï¼ˆmacOSï¼‰æˆ– `gdb`ï¼ˆLinuxï¼‰ï¼š

```bash
# macOS
lldb src-tauri/target/debug/classnoteai

# è¨­ç½®æ–·é»
(lldb) breakpoint set --name main
(lldb) run
```

### 4. ä½¿ç”¨å‰ç«¯èª¿è©¦å™¨

åœ¨é–‹ç™¼è€…å·¥å…·çš„ Sources é¢æ¿ä¸­ï¼š
- è¨­ç½®æ–·é»
- å–®æ­¥èª¿è©¦
- æŸ¥çœ‹è®Šé‡å€¼

## ğŸ“ å¸¸ç”¨èª¿è©¦å‘½ä»¤

```bash
# é–‹ç™¼æ¨¡å¼ï¼ˆæ¨è–¦ï¼‰
npm run tauri:dev

# æ§‹å»º debug ç‰ˆæœ¬
npm run tauri:build:debug

# æ§‹å»º release ç‰ˆæœ¬
npm run tauri:build

# åªæ§‹å»ºå‰ç«¯
npm run build

# åªé‹è¡Œå‰ç«¯é–‹ç™¼æœå‹™å™¨
npm run dev
```

## ğŸ¯ èª¿è©¦å ´æ™¯

### å ´æ™¯ 1: å‰ç«¯å•é¡Œèª¿è©¦
**æ¨è–¦æ–¹æ³•**ï¼š`npm run tauri:dev`
- ä½¿ç”¨é–‹ç™¼è€…å·¥å…·æª¢æŸ¥ DOMã€æ¨£å¼ã€ç¶²çµ¡è«‹æ±‚
- ä½¿ç”¨ React DevTools æª¢æŸ¥çµ„ä»¶ç‹€æ…‹

### å ´æ™¯ 2: Rust å¾Œç«¯å•é¡Œèª¿è©¦
**æ¨è–¦æ–¹æ³•**ï¼š`npm run tauri:build:debug` + `lldb`
- æ§‹å»º debug ç‰ˆæœ¬
- ä½¿ç”¨èª¿è©¦å™¨è¨­ç½®æ–·é»
- æŸ¥çœ‹è®Šé‡å€¼å’Œèª¿ç”¨å †æ£§

### å ´æ™¯ 3: æ€§èƒ½å•é¡Œèª¿è©¦
**æ¨è–¦æ–¹æ³•**ï¼šé–‹ç™¼è€…å·¥å…·çš„ Performance é¢æ¿
- è¨˜éŒ„æ€§èƒ½åˆ†æ
- æŸ¥çœ‹å‡½æ•¸åŸ·è¡Œæ™‚é–“
- è­˜åˆ¥æ€§èƒ½ç“¶é ¸

### å ´æ™¯ 4: ç¶²çµ¡å•é¡Œèª¿è©¦
**æ¨è–¦æ–¹æ³•**ï¼šé–‹ç™¼è€…å·¥å…·çš„ Network é¢æ¿
- æŸ¥çœ‹ HTTP è«‹æ±‚/éŸ¿æ‡‰
- æª¢æŸ¥ Tauri Commands èª¿ç”¨
- æŸ¥çœ‹ WebSocket é€£æ¥

## âš ï¸ æ³¨æ„äº‹é …

1. **Debug ç‰ˆæœ¬è¼ƒå¤§**ï¼šdebug æ§‹å»ºåŒ…å«èª¿è©¦ç¬¦è™Ÿï¼Œæ–‡ä»¶è¼ƒå¤§
2. **æ€§èƒ½è¼ƒæ…¢**ï¼šdebug ç‰ˆæœ¬æœªå„ªåŒ–ï¼Œé‹è¡Œé€Ÿåº¦è¼ƒæ…¢
3. **ç”Ÿç”¢ç’°å¢ƒ**ï¼šä¸è¦ä½¿ç”¨ debug ç‰ˆæœ¬åˆ†ç™¼çµ¦ç”¨æˆ¶

## ğŸ”— ç›¸é—œè³‡æº

- [Tauri Debugging Guide](https://v2.tauri.app/develop/debugging/)
- [Rust Debugging](https://doc.rust-lang.org/book/appendix-04-useful-development-tools.html)
- [Chrome DevTools](https://developer.chrome.com/docs/devtools/)

---

**æœ€å¾Œæ›´æ–°**: 2024å¹´12æœˆ

